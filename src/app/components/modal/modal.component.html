<h1 mat-dialog-title>{{ data.name }}</h1>
<div mat-dialog-content>
  <p>{{ prettyPrintDate(data.startDate, false) }}{{ prettyPrintDate(data.endDate, true) }}</p>
  <div>
    <ol class="arrows">
      <li><mat-icon>location_on</mat-icon></li>
      <li *ngFor="let g of data.geodata"><a>{{ g.streetName }}{{ g.streetNumber ? ' ' + g.streetNumber : '' }}{{ g.postalCode ? ', ' + g.postalCode : '' }}</a></li>
    </ol>
  <!-- <p *ngFor="let g of data.geodata"><mat-icon>place</mat-icon>{{ g.streetName }}{{ g.streetNumber ? ' ' + g.streetNumber : '' }}{{ g.postalCode ? ', ' + g.postalCode : '' }}</p> -->
  </div>
  <div class="dialog-themes" *ngIf="data.themes.length">
    <mat-chip-list>
      <mat-chip *ngFor="let t of data.themes" selected="true" color="primary">{{ t.names[0].name }}</mat-chip>
    </mat-chip-list>
    <!-- <mat-accordion>
      <mat-expansion-panel (opened)="getThemes(data.themes, data.recordId)" hideToggle="false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>donut_large</mat-icon>
          <span style="padding-top: 0.25em; padding-left:1em;">Related Themes:</span>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div *ngIf="loadingTheme">
        <mat-progress-bar color="primary" mode="query"></mat-progress-bar>
      </div>
      <div *ngIf="!loadingTheme" >
        <div *ngFor="let t of data.themes">
          <a href="javascript:void(0)" (click)="goToTheme(t)">{{ t.names[0].name }}</a>
        </div>
      </div>
      </mat-expansion-panel>
    </mat-accordion> -->
  </div>
  <div class="dialog-people" *ngIf="data.people.length">
    <mat-accordion>
      <mat-expansion-panel (opened)="getPeople(data.people, data.recordId)"  hideToggle="false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>account_circle</mat-icon>
          <span style="padding-top: 0.25em; padding-left:1em;">Related People/Organizations:</span>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div *ngIf="loadingPeople">
        <mat-progress-bar color="primary" mode="query"></mat-progress-bar>
      </div>
      <div *ngIf="!loadingPeople" >
        <div *ngFor="let p of data.people">
          <a href="javascript:void(0)" (click)="goToPerson(p)">{{ p.names[0].name }}</a>
        </div>
      </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
  <div class="dialog-events" *ngIf="data.events.length">
    <mat-accordion>
      <mat-expansion-panel (opened)="getEvents(data.events, data.recordId)" hideToggle="false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>event</mat-icon>
          <span style="padding-top: 0.25em; padding-left:1em;">Related Events:</span>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div *ngIf="loadingEvent">
        <mat-progress-bar color="primary" mode="query"></mat-progress-bar>
      </div>
      <div *ngIf="!loadingEvent" >
        <div *ngFor="let e of data.events">
          <a href="javascript:void(0)" (click)="goToEvent(e)">{{ e.name }}</a>
        </div>
      </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
  <div class="dialog-locations"*ngIf="data.locations.length">
    <mat-accordion>
      <mat-expansion-panel (opened)="getLocations(data.locations, data.recordId)" hideToggle="false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>place</mat-icon>
          <span style="padding-top: 0.25em; padding-left:1em;">Related Locations:</span>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div *ngIf="loadingLocation">
        <mat-progress-bar color="primary" mode="query"></mat-progress-bar>
      </div>
      <div *ngIf="!loadingLocation" >
        <!-- <app-minimap [locations]="data.locations"></app-minimap> -->
        <div *ngFor="let l of data.locations">
          <a href="javascript:void(0)" (click)="goToLocation(l)">{{ l.names[0].name }}</a>
        </div>
      </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
  <div class="dialog-sources" *ngIf="data.sources.length">
    <mat-accordion>
      <mat-expansion-panel (opened)="getSources(data.sources, data.recordId)" hideToggle="false">
      <mat-expansion-panel-header>
        <mat-panel-title>
          <mat-icon>collections</mat-icon>
          <span style="padding-top: 0.25em; padding-left:1em;">Related Media:</span>
        </mat-panel-title>
      </mat-expansion-panel-header>
      <div *ngIf="loadingSource">
        <mat-progress-bar color="primary" mode="query"></mat-progress-bar>
      </div>
      <div *ngIf="!loadingSource" >
        <div *ngFor="let s of data.sources">
          <div class="media-collection">
            <div *ngFor="let f of s.files; let i = index" class="media-item">
              <img class="media-item" *ngIf="isImage(f.type)" [src]="f.url" (click)="open(s.files, i)"/>
              <video *ngIf="isVideo(f.type)"  (click)="open(s.files, i)" controls>
                <source [src]="f.url" type="video/mp4">
                Your browser does not support the video tag.
              </video>
              <audio *ngIf="isAudio(f.type)"></audio>
              <mat-icon *ngIf="isPDF(f.type)" (click)="open(s.files, i)">picture_as_pdf</mat-icon>
            </div>
          </div>
          <div>
            <h3>{{ s.name }}</h3>
            <mat-list class="sources-list" dense>
             <mat-list-item *ngFor="let si of s.identifiers">
               <mat-icon matListIcon>link</mat-icon>
               <a [href]="si.url" target="_blank">{{ getHost(si.url) }}</a>
             </mat-list-item>
            </mat-list>
          </div>
        </div>
      </div>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
</div>
<div mat-dialog-actions align="end">
  <!--<button mat-button (click)="onNoClick()">No Thanks</button> -->
  <button mat-button (click)="closeModal()"><mat-icon>close</mat-icon></button> <!-- cdkFocusInitial -->
</div>
